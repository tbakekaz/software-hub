# âœ… 500 é”™è¯¯æœ€ç»ˆä¿®å¤ - å·²å®Œæˆ

## ğŸ”§ å·²å®Œæˆçš„ä¿®å¤

### 1. å®Œå…¨ç§»é™¤ `require()`ï¼Œæ”¹ç”¨é™æ€ ES6 import

**å…³é”®ä¿®å¤**ï¼š`lib/content-edge.ts`

```typescript
// âŒ ä¹‹å‰ï¼ˆåœ¨ Edge Runtime ä¸­å¯èƒ½å¤±è´¥ï¼‰
const generated = require('./generated/content');

// âœ… ç°åœ¨ï¼ˆEdge Runtime å®Œå…¨æ”¯æŒï¼‰
import {
  allSoftware as _allSoftware,
  allTutorials as _allTutorials,
  allTutorialsMeta as _allTutorialsMeta,
  allAI as _allAI,
} from './generated/content';
```

**ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦**ï¼š
- `require()` æ˜¯ Node.js çš„ CommonJS è¯­æ³•
- Edge Runtime åŸºäº Web æ ‡å‡†ï¼Œä¸å®Œå…¨æ”¯æŒ `require()`
- å³ä½¿æœ‰ `nodejs_compat` æ ‡å¿—ï¼Œ`require()` ä»å¯èƒ½å¤±è´¥
- ES6 `import` æ˜¯ Web æ ‡å‡†ï¼ŒEdge Runtime å®Œå…¨æ”¯æŒ

### 2. æ”¹è¿›é”™è¯¯å¤„ç†

- `lib/i18n/server.ts` - æ·»åŠ äº†å®Œæ•´çš„ try-catch
- `app/(site)/page.tsx` - æ·»åŠ äº†é¡µé¢çº§åˆ«çš„é”™è¯¯å¤„ç†
- æ‰€æœ‰å‡½æ•°éƒ½æœ‰å›é€€æœºåˆ¶ï¼Œç¡®ä¿ä¸ä¼šå´©æºƒ

### 3. ä»£ç å·²æ¨é€

æ‰€æœ‰ä¿®å¤å·²æ¨é€åˆ° GitHubï¼ŒCloudflare Pages ä¼šè‡ªåŠ¨å¼€å§‹æ–°éƒ¨ç½²ã€‚

## ğŸ“‹ ç°åœ¨éœ€è¦åšçš„

### æ­¥éª¤ 1ï¼šç¡®è®¤ Cloudflare Dashboard é…ç½®

1. è®¿é—®ï¼šhttps://dash.cloudflare.com
2. è¿›å…¥ï¼š**Workers å’Œ Pages** â†’ **software-hub** â†’ **è®¾ç½®**ï¼ˆSettingsï¼‰
3. ç¡®è®¤ **"å…¼å®¹æ€§æ ‡å¿—"** ä¸­ï¼š
   - âœ… ç”Ÿäº§ç¯å¢ƒï¼š`nodejs_compat`
   - âœ… é¢„è§ˆç¯å¢ƒï¼š`nodejs_compat`

### æ­¥éª¤ 2ï¼šç­‰å¾…è‡ªåŠ¨éƒ¨ç½²

- ä»£ç å·²æ¨é€ï¼ŒCloudflare ä¼šè‡ªåŠ¨å¼€å§‹æ–°éƒ¨ç½²
- æˆ–æ‰‹åŠ¨ç‚¹å‡» **"é‡æ–°éƒ¨ç½²"**ï¼ˆRetry deploymentï¼‰
- ç­‰å¾… 5-10 åˆ†é’Ÿ

### æ­¥éª¤ 3ï¼šéªŒè¯ä¿®å¤

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š
- https://software-hub.pages.dev
- https://kazsoft.dpdns.org

åº”è¯¥ä¸å†æ˜¾ç¤º 500 é”™è¯¯ï¼

## ğŸ¯ ä¿®å¤åŸç†

### ä¸ºä»€ä¹ˆä¹‹å‰ä¼šå¤±è´¥ï¼Ÿ

1. **`require()` åœ¨ Edge Runtime ä¸­ä¸å¯é **
   - Edge Runtime åŸºäº Web æ ‡å‡†ï¼ˆV8 å¼•æ“ï¼‰
   - `require()` æ˜¯ Node.js çš„ CommonJS è¯­æ³•
   - å³ä½¿æœ‰ `nodejs_compat` æ ‡å¿—ï¼ŒæŸäº› Node.js API ä»å¯èƒ½ä¸å¯ç”¨

2. **é™æ€ `import` æ˜¯ Web æ ‡å‡†**
   - ES6 æ¨¡å—æ˜¯ Web æ ‡å‡†çš„ä¸€éƒ¨åˆ†
   - Edge Runtime å®Œå…¨æ”¯æŒ ES6 `import`
   - åœ¨æ„å»ºæ—¶è§£æï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½è¢«æ­£ç¡®æ‰“åŒ…

### ä¸ºä»€ä¹ˆç°åœ¨ä¼šæˆåŠŸï¼Ÿ

1. âœ… ä½¿ç”¨é™æ€ ES6 `import`ï¼ˆWeb æ ‡å‡†ï¼‰
2. âœ… åœ¨æ„å»ºæ—¶è§£æï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½è¢«æ‰“åŒ…
3. âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶
4. âœ… `nodejs_compat` æ ‡å¿—å·²é…ç½®

## ğŸ” å¦‚æœä»ç„¶æœ‰é—®é¢˜

### æ£€æŸ¥éƒ¨ç½²æ—¥å¿—

1. åœ¨ Cloudflare Pages çš„ **"éƒ¨ç½²"** æ ‡ç­¾
2. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
3. æŸ¥çœ‹ **"æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯"**ï¼ˆView detailsï¼‰
4. æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### å¸¸è§é”™è¯¯

1. **"Cannot find module './generated/content'"**
   - è§£å†³ï¼šç¡®ä¿ `prebuild` è„šæœ¬åœ¨æ„å»ºå‰è¿è¡Œ
   - æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­æ˜¯å¦æœ‰ "âœ… å†…å®¹æ•°æ®å·²ç”Ÿæˆ"

2. **æ„å»ºå¤±è´¥**
   - è§£å†³ï¼šæ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆåº”è¯¥æ˜¯ 18 æˆ– 20ï¼‰
   - æ£€æŸ¥æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®

## âœ… éªŒè¯æ¸…å•

- [x] ä»£ç å·²ä¿®å¤ï¼ˆä½¿ç”¨é™æ€ ES6 importï¼‰
- [x] é”™è¯¯å¤„ç†å·²æ·»åŠ 
- [x] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] åœ¨ Cloudflare Dashboard ä¸­ç¡®è®¤ `nodejs_compat` æ ‡å¿—å·²å¯ç”¨
- [ ] éƒ¨ç½²æˆåŠŸï¼ˆç»¿è‰²å‹¾é€‰ï¼‰
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®

å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤åï¼Œ500 é”™è¯¯åº”è¯¥ä¼šå½»åº•è§£å†³ï¼

