# ğŸš¨ ç´§æ€¥ä¿®å¤ 500 é”™è¯¯ - å®Œæ•´æ­¥éª¤

## é—®é¢˜åˆ†æ

500 é”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¼•èµ·ï¼š
1. **æ¨¡å—å¯¼å…¥å¤±è´¥**ï¼šEdge Runtime ä¸­ `require()` æˆ– `import` å¤±è´¥
2. **cookies() API å¤±è´¥**ï¼šåœ¨ Edge Runtime ä¸­å¯èƒ½ä¸ç¨³å®š
3. **å†…å®¹æ–‡ä»¶æœªåŠ è½½**ï¼šç”Ÿæˆçš„å†…å®¹æ–‡ä»¶åœ¨è¿è¡Œæ—¶æ— æ³•è®¿é—®

## âœ… å·²å®Œæˆçš„ä»£ç ä¿®å¤

æˆ‘å·²ç»æ·»åŠ äº†ï¼š
1. âœ… é”™è¯¯å¤„ç†åˆ° `getDictionary()` å’Œ `getCurrentLang()`
2. âœ… å›é€€æœºåˆ¶åˆ° `content-edge.ts`
3. âœ… é”™è¯¯è¾¹ç•Œé¡µé¢ `app/error.tsx`

## ğŸ”§ å¿…é¡»æ‰‹åŠ¨æ“ä½œï¼ˆå…³é”®ï¼ï¼‰

### æ­¥éª¤ 1ï¼šåœ¨ Cloudflare Dashboard å¯ç”¨ nodejs_compat

**è¿™æ˜¯æœ€é‡è¦çš„æ­¥éª¤ï¼**

1. è®¿é—®ï¼šhttps://dash.cloudflare.com
2. ç™»å½•ä½ çš„è´¦å·
3. è¿›å…¥ï¼š**Workers å’Œ Pages** â†’ **software-hub** â†’ **è®¾ç½®**ï¼ˆSettingsï¼‰
4. æ‰¾åˆ° **"Functions"** éƒ¨åˆ†
5. åœ¨ **"å…¼å®¹æ€§æ ‡å¿—"**ï¼ˆCompatibility Flagsï¼‰ä¸­ï¼š
   - **ç”Ÿäº§ç¯å¢ƒ**ï¼šæ·»åŠ  `nodejs_compat`
   - **é¢„è§ˆç¯å¢ƒ**ï¼šæ·»åŠ  `nodejs_compat`
6. **ä¿å­˜**

### æ­¥éª¤ 2ï¼šæ£€æŸ¥æ„å»ºé…ç½®

åœ¨ **"è®¾ç½®"** â†’ **"æ„å»ºè®¾ç½®"** ä¸­ç¡®è®¤ï¼š

- **æ„å»ºå‘½ä»¤**ï¼š
  ```bash
  npm install && npm run build && npm run pages:build
  ```
- **æ„å»ºè¾“å‡ºç›®å½•**ï¼š`.vercel/output/static`
- **Node.js ç‰ˆæœ¬**ï¼š`18` æˆ– `20`

### æ­¥éª¤ 3ï¼šæŸ¥çœ‹éƒ¨ç½²æ—¥å¿—

1. è¿›å…¥ **"éƒ¨ç½²"**ï¼ˆDeploymentsï¼‰æ ‡ç­¾
2. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
3. æŸ¥çœ‹ **"æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯"**ï¼ˆView detailsï¼‰
4. æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### æ­¥éª¤ 4ï¼šé‡æ–°éƒ¨ç½²

1. åœ¨ **"éƒ¨ç½²"** æ ‡ç­¾
2. ç‚¹å‡» **"é‡æ–°éƒ¨ç½²"**ï¼ˆRetry deploymentï¼‰
3. ç­‰å¾… 5-10 åˆ†é’Ÿ

## ğŸ” å¦‚æœä»ç„¶å¤±è´¥

### æ£€æŸ¥éƒ¨ç½²æ—¥å¿—ä¸­çš„é”™è¯¯

å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆï¼š

1. **"Cannot find module './generated/content'"**
   - è§£å†³ï¼šç¡®ä¿ `prebuild` è„šæœ¬åœ¨æ„å»ºå‰è¿è¡Œ
   - æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­æ˜¯å¦æœ‰ "âœ… å†…å®¹æ•°æ®å·²ç”Ÿæˆ"

2. **"cookies() is not a function"**
   - è§£å†³ï¼šå·²æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä¼šè‡ªåŠ¨å›é€€åˆ°é»˜è®¤è¯­è¨€

3. **"require is not defined"**
   - è§£å†³ï¼šå·²æ·»åŠ  try-catchï¼Œä¼šä½¿ç”¨ç©ºæ•°æ®ä½œä¸ºå›é€€

### ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼šç¦ç”¨ Edge Runtime

å¦‚æœé—®é¢˜æŒç»­ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨ Edge Runtimeï¼š

1. åœ¨é¡µé¢æ–‡ä»¶ä¸­ç§»é™¤ `export const runtime = 'edge';`
2. ä½†è¿™ä¼šå¤±å» Edge Runtime çš„æ€§èƒ½ä¼˜åŠ¿

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³ï¼Œè¯·æä¾›ï¼š
1. Cloudflare Dashboard ä¸­éƒ¨ç½²æ—¥å¿—çš„æˆªå›¾
2. æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯ï¼ˆF12 â†’ Consoleï¼‰
3. ç½‘ç»œè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼ˆF12 â†’ Networkï¼‰

## âœ… éªŒè¯æ¸…å•

å®Œæˆä¿®å¤åï¼Œæ£€æŸ¥ï¼š
- [ ] åœ¨ Cloudflare Dashboard ä¸­å¯ç”¨äº† `nodejs_compat` æ ‡å¿—
- [ ] æ„å»ºå‘½ä»¤æ­£ç¡®
- [ ] éƒ¨ç½²æˆåŠŸï¼ˆç»¿è‰²å‹¾é€‰ï¼‰
- [ ] è®¿é—® https://software-hub.pages.dev ä¸å†æ˜¾ç¤º 500 é”™è¯¯
- [ ] ç½‘ç«™å†…å®¹æ­£å¸¸æ˜¾ç¤º

